<ion-header [translucent]="true">
  <ion-toolbar color="rcustom">
    <ion-title class="ion-text-center">Página inicial</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>

  <ion-grid *ngIf="!hiddenAll">

    <ion-row>
      <ion-col>

        <ion-card>

          <div *ngIf="!hiddenProgressBar">

            <ion-card-header>

              <ion-card-title class="title-fz">Meta Mensal: {{goal | currency: 'BRL': 'symbol'}}</ion-card-title>
              <ion-card-subtitle>Período: {{period}}</ion-card-subtitle>
            </ion-card-header>

            <ion-card-content class="ion-justify-content-center ion-align-items-center" style="display: flex;"
              (click)="presentPopover();">

              <div class="divProgress">

                <div id="circleProgress" [ngStyle]="circleProgressStyle">

                  <div id="circleProgressInside" [ngStyle]="circleProgressInsideStyle">

                    <span class="span-percentage">{{percentageAchieved}}%</span>
                  </div>
                </div>
              </div>

            </ion-card-content>

            <div class="ion-justify-content-end ion-aligm-items-end" style="display: flex;">

              <ion-item button (click)="presentButtonsPopover($event)"><ion-icon name="ellipsis-vertical-outline"></ion-icon></ion-item>
            </div>
          </div>

          <div *ngIf="hiddenProgressBar">

            <ion-card-header>

              <ion-card-title>Meta Mensal</ion-card-title>
            </ion-card-header>
            <ion-card-content>

              <ion-grid>

                <ion-row class="ion-justify-content-center ion-align-items-center">

                  <ion-col size="12">

                    <span class="span-percentage">Meta mensal não definida.</span>
                  </ion-col>
                </ion-row>

                <ion-row>

                  <ion-col size="12">

                    <ion-button expand="block" color="rcustom" (click)="showModalGoalStore();">Definir Meta</ion-button>
                  </ion-col>
                </ion-row>
              </ion-grid>
            </ion-card-content>
          </div>
        </ion-card>
      </ion-col>

    </ion-row>

    <ion-row>

      <ion-col>

        <ion-card>

          <ion-card-header>

            <ion-card-title class="title-fz">Serviços Prestados(%)</ion-card-title>
          </ion-card-header>

          <ion-card-content class="ion-justify-content-center ion-align-items-center" style="display: flex;">

            <div *ngIf="!hiddenChart" class="chart-container" style="position: relative;">

              <canvas baseChart [datasets]="chartData" [labels]="chartLabels" [options]="chartOptions"
                [colors]="chartColors" [legend]="showLegend" [chartType]="chartType"></canvas>
            </div>
            <span *ngIf="hiddenChart" class="fail-span">Nenhum Serviço prestado esse mês.</span>
          </ion-card-content>
        </ion-card>
      </ion-col>
    </ion-row>
  </ion-grid>
        
    <div class="container ion-justify-content-center ion-align-items-center" *ngIf="hiddenAll">

      <span class="fail-span">Falha ao carregar página home.<br> <a (click)="prepareMainPage();">Tentar novamente <ion-icon name="refresh"></ion-icon></a></span>
    </div>
</ion-content>